"""
–ü–†–û–î–í–ò–ù–£–¢–´–ô –°–ï–ö–†–ï–¢–ê–†–¨ –ì–ê–ô–†–ê–¢–ñ–û–ù–ê
–í–µ—Ä—Å–∏—è: 3.0
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –ü–æ–ª–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞
- –ü–∞–º—è—Ç—å –æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–∞—Ö
- –†–∞–∑–Ω—ã–µ —Ä–µ–∂–∏–º—ã –æ–±—â–µ–Ω–∏—è
- –ê–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
- –õ–æ–≥–∏—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã
"""

import logging
import random
import re
from datetime import datetime, timedelta
from typing import Dict, List, Optional, Any, Tuple
from enum import Enum
from dataclasses import dataclass, field
from collections import deque

from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import (
    Application, 
    CommandHandler, 
    MessageHandler, 
    filters, 
    ContextTypes,
    CallbackQueryHandler
)

# ========== –ù–ê–°–¢–†–û–ô–ö–ò ==========
YOUR_USER_ID = 8449323467  # –ó–ê–ú–ï–ù–ò–¢–¨ –ù–ê –°–í–û–ô ID
BOT_TOKEN = "8580195855:AAHpKyKKS_ResHZRyuBRE6Oe9yD-SVsRQSQ"  # –¢–í–û–ô –¢–û–ö–ï–ù

# ========== –ù–ê–°–¢–†–û–ô–ö–ê –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø ==========
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)

# ========== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –ö–õ–ê–°–°–´ ==========

class UserMood(Enum):
    """–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    VERY_BAD = "–æ—á–µ–Ω—å –ø–ª–æ—Ö–æ–µ"
    BAD = "–ø–ª–æ—Ö–æ–µ"
    NEUTRAL = "–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ"
    GOOD = "—Ö–æ—Ä–æ—à–µ–µ"
    EXCELLENT = "–æ—Ç–ª–∏—á–Ω–æ–µ"

class ConversationState(Enum):
    """–°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞"""
    GREETING = "–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ"
    WAITING = "–æ–∂–∏–¥–∞–Ω–∏–µ"
    JOKE_MODE = "—Ä–µ–∂–∏–º —à—É—Ç–æ–∫"
    PROBLEM_MODE = "—Ä–µ–∂–∏–º –ø—Ä–æ–±–ª–µ–º"
    FAREWELL = "–ø—Ä–æ—â–∞–Ω–∏–µ"
    QUESTION_MODE = "—Ä–µ–∂–∏–º –≤–æ–ø—Ä–æ—Å–æ–≤"
    TECHNICAL_MODE = "—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º"

@dataclass
class UserProfile:
    """–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    user_id: int
    username: str = ""
    first_name: str = ""
    last_name: str = ""
    
    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    first_seen: datetime = field(default_factory=datetime.now)
    last_seen: datetime = field(default_factory=datetime.now)
    message_count: int = 0
    jokes_told: int = 0
    
    # –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ
    mood: UserMood = UserMood.NEUTRAL
    mood_score: float = 0.0
    mood_history: List[Tuple[datetime, float]] = field(default_factory=list)
    
    # –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞
    current_state: ConversationState = ConversationState.GREETING
    last_intent: str = ""
    last_topic: str = ""
    conversation_history: deque = field(default_factory=lambda: deque(maxlen=50))
    context: Dict[str, Any] = field(default_factory=dict)
    
    # –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
    favorite_topics: List[str] = field(default_factory=list)
    preferred_joke_type: str = "any"
    response_style: str = "normal"  # normal, friendly, formal, funny
    
    def update_mood(self, delta: float):
        """–û–±–Ω–æ–≤–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        self.mood_score = max(-10, min(10, self.mood_score + delta))
        self.mood_history.append((datetime.now(), self.mood_score))
        
        if self.mood_score <= -5:
            self.mood = UserMood.VERY_BAD
        elif self.mood_score <= -2:
            self.mood = UserMood.BAD
        elif self.mood_score <= 2:
            self.mood = UserMood.NEUTRAL
        elif self.mood_score <= 5:
            self.mood = UserMood.GOOD
        else:
            self.mood = UserMood.EXCELLENT

# ========== –û–°–ù–û–í–ù–û–ô –ö–õ–ê–°–° –ë–û–¢–ê ==========

class GayratjonSecretary:
    """
    –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å —É–º–Ω–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞—Ä—è –ì–∞–π—Ä–∞—Ç–∂–æ–Ω–∞
    """
    
    def __init__(self):
        # –•—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        self.users: Dict[int, UserProfile] = {}
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –±–∞–∑ –∑–Ω–∞–Ω–∏–π
        self._init_greetings()
        self._init_jokes()
        self._init_facts()
        self._init_questions()
        self._init_problems()
        self._init_technical()
        self._init_farewells()
        self._init_small_talk()
        self._init_proverbs()
        self._init_stories()
        
        # –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏–π
        self.intent_patterns = self._init_intent_patterns()
        
        logger.info("ü§µ –°–µ–∫—Ä–µ—Ç–∞—Ä—å –ì–∞–π—Ä–∞—Ç–∂–æ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
    
    def _init_intent_patterns(self) -> Dict[str, List[str]]:
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏–π"""
        return {
            "greeting": [
                r"–ø—Ä–∏–≤–µ—Ç|–∑–¥—Ä–∞–≤—Å—Ç–≤|–¥–æ–±—Ä|—Ö–∞–π|hello|hi|—Å–∞–ª—é—Ç|–∑–¥–∞—Ä–æ–≤|–ø—Ä–∏–≤—ñ—Ç",
                r"–¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ|–¥–æ–±—Ä—ã–π –¥–µ–Ω—å|–¥–æ–±—Ä—ã–π –≤–µ—á–µ—Ä|–¥–æ–±—Ä–æ–π –Ω–æ—á–∏",
                r"—Ä–∞–¥ –≤–∏–¥–µ—Ç—å|–¥–∞–≤–Ω–æ –Ω–µ –≤–∏–¥–µ–ª–∏—Å—å|–∫–∞–∫ –∂–∏–∑–Ω—å"
            ],
            "farewell": [
                r"–ø–æ–∫–∞|–¥–æ —Å–≤–∏–¥–∞–Ω|–ø—Ä–æ—â–∞–π|—É–≤–∏–¥–∏–º—Å—è|–¥–æ —Å–≤—è–∑–∏|bye|goodbye|—á–∞–æ",
                r"–≤—Å–µ–≥–æ —Ö–æ—Ä–æ—à–µ–≥–æ|–≤—Å–µ–≥–æ –¥–æ–±—Ä–æ–≥–æ|–¥–æ –≤—Å—Ç—Ä–µ—á–∏|—Å—á–∞—Å—Ç–ª–∏–≤–æ",
                r"–±—ã–≤–∞–π|—É–¥–∞—á–∏|–ø–æ–∫–µ–¥–∞|–≥—É–¥–±–∞–π"
            ],
            "joke_request": [
                r"–∞–Ω–µ–∫–¥–æ—Ç|—à—É—Ç–∫|—Ä–∞—Å—Å–º–µ—à|—Å–º–µ—à–Ω–æ|üòÇ|üòÑ|–ø—Ä–∏–∫–æ–ª|—Ö–æ—Ö–º|–ø–æ—Å–º–µ—è—Ç",
                r"—é–º–æ—Ä|–≤–µ—Å–µ–ª|—Ä–∞—Å—Å–∫–∞–∂–∏ –∞–Ω–µ–∫–¥–æ—Ç|—Ä–∞—Å—Å–∫–∞–∂–∏ —à—É—Ç–∫—É|–ø–æ—à—É—Ç–∏",
                r"—Å–º–µ—à–Ω–æ–µ|—á—Ç–æ-—Ç–æ –≤–µ—Å–µ–ª–æ–µ|–ø–æ–¥–Ω–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ|—Ä–∞–∑–≤–µ—Å–µ–ª–∏"
            ],
            "fact_request": [
                r"—Ñ–∞–∫—Ç|–∏–Ω—Ç–µ—Ä–µ—Å–Ω|–∑–Ω–∞–µ—à—å –ª–∏|–∞ –∑–Ω–∞–µ—à—å|–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç",
                r"–ø—Ä–∞–≤–¥–∞ –ª–∏|—ç—Ç–æ –ø—Ä–∞–≤–¥–∞|—Ä–∞—Å—Å–∫–∞–∂–∏ —Ñ–∞–∫—Ç|–ø–æ–∑–Ω–∞–≤–∞—Ç–µ–ª—å–Ω–æ",
                r"–ª—é–±–æ–ø—ã—Ç–Ω–æ|—É–¥–∏–≤–∏|–ø–æ—Ä–∞–∑–∏ –º–µ–Ω—è|–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–Ω–∞–ª"
            ],
            "urgent": [
                r"—Å—Ä–æ—á–Ω|–≤–∞–∂–Ω|–±—ã—Å—Ç—Ä|–Ω–µ–º–µ–¥–ª–µ–Ω|—Å–µ–π—á–∞—Å –∂–µ|–ø–æ–∂–∞—Ä|–∞–≤—Ä–∞–ª|–∫—Ä–∏—Ç–∏—á–Ω",
                r"–æ—á–µ–Ω—å –≤–∞–∂–Ω–æ|life or death|—Å—Ä–æ—á–Ω–æ –Ω—É–∂–Ω–æ|–ø—Ä—è–º–æ —Å–µ–π—á–∞—Å",
                r"–≤—Ä–µ–º—è –ø–æ–¥–∂–∏–º–∞–µ—Ç|–¥–µ–¥–ª–∞–π–Ω|–≥–æ—Ä–∏—Ç|–∞—Ç–∞—Å"
            ],
            "where_gayratjon": [
                r"–≥–¥–µ –≥–∞–π—Ä–∞—Ç–∂–æ–Ω|–≥–∞–π—Ä–∞—Ç–∂–æ–Ω –≥–¥–µ|—Ö–æ–∑—è–∏–Ω –≥–¥–µ|–ø–æ–∑–æ–≤–∏ –≥–∞–π—Ä–∞—Ç–∂–æ–Ω–∞",
                r"–ø–æ–∑–æ–≤–∏ —Ö–æ–∑—è–∏–Ω–∞|–≤—ã–∑–æ–≤–∏ –≥–∞–π—Ä–∞—Ç–∂–æ–Ω–∞|–ø–æ–∑–≤–∞—Ç—å –≥–∞–π—Ä–∞—Ç–∂–æ–Ω–∞",
                r"–≥–∞–π—Ä–∞—Ç–∂–æ–Ω —Ç—É—Ç|–≥–∞–π—Ä–∞—Ç–∂–æ–Ω –æ–Ω–ª–∞–π–Ω|—Ö–æ–∑—è–∏–Ω –æ–Ω–ª–∞–π–Ω"
            ],
            "how_are_you": [
                r"–∫–∞–∫ –¥–µ–ª–∞|–∫–∞–∫ —Ç—ã|–∫–∞–∫ –∂–∏–∑–Ω—å|how are you|—á—ë –∫–∞–∫|—á–µ –∫–∞–∫",
                r"–∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ|–∫–∞–∫ —Å–∞–º|–∫–∞–∫ –ø–æ–∂–∏–≤–∞–µ—à—å|–∫–∞–∫ –æ–Ω–æ",
                r"what's up|how do you do|how's it going"
            ],
            "who_are_you": [
                r"–∫—Ç–æ —Ç—ã|—Ç—ã –∫—Ç–æ|–∫—Ç–æ —Ç–∞–∫–æ–π|–ø—Ä–µ–¥—Å—Ç–∞–≤—å—Å—è|—Ä–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ",
                r"—Ç–≤–æ—è —Ä–æ–ª—å|—á—Ç–æ —Ç—ã —Ç–∞–∫–æ–µ|—Ç—ã –±–æ—Ç|—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º–∞",
                r"who are you|what are you|your name"
            ],
            "thanks": [
                r"—Å–ø–∞—Å–∏–±|–±–ª–∞–≥–æ–¥–∞—Ä|—Å–µ–Ω–∫—Å|thanks|thank you|–º–µ—Ä—Å–∏|—Å–ø—Å",
                r"–±–ª–∞–≥–æ–¥–∞—Ä—é|–ø—Ä–∏–∑–Ω–∞—Ç–µ–ª–µ–Ω|–≤—ã—Ä—É—á–∏–ª|–ø–æ–º–æ–≥|–æ—á–µ–Ω—å –ø–æ–º–æ–≥"
            ],
            "insult": [
                r"–¥—É—Ä–∞–∫|–ø—Ä–∏–¥—É—Ä–æ–∫|–∏–¥–∏–æ—Ç|—Ç—É–ø–æ–π|–¥—É—Ä–∞|–≥–ª—É–ø—ã–π|–ª–æ—Ö|–¥–µ–±–∏–ª|–∫–æ–∑–µ–ª",
                r"—Å–≤–æ–ª–æ—á—å|–≥–∞–¥|—Ä–µ–¥–∏—Å–∫–∞|–±–µ—Å—Ç–æ–ª–æ—á—å|–±–µ–∑–¥–∞—Ä—å|—Ç—É–ø–∏—Ü–∞|–æ–ª–µ–Ω—å",
                r"—Ç—ã —á–µ –¥—É—Ä–∞–∫|—Ç—ã –ø—Ä–∏–¥—É—Ä–æ–∫|–∏–¥–∏–æ—Ç—Å–∫–∏–π –±–æ—Ç|—Ç—É–ø–æ–π –±–æ—Ç"
            ],
            "compliment": [
                r"–º–æ–ª–æ–¥–µ—Ü|—É–º–Ω–∏—Ü|–∫–ª–∞—Å—Å|–æ—Ç–ª–∏—á–Ω|—Å—É–ø–µ—Ä|–∫—Ä—É—Ç|–∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω|–ø—Ä–µ–∫—Ä–∞—Å–Ω",
                r"—Ç—ã –ª—É—á—à–∏–π|—Ç—ã —Ö–æ—Ä–æ—à–∏–π|—Å–ø–∞—Å–∏–±–æ –±–æ–ª—å—à–æ–µ|—Ç—ã –∫–ª–µ–≤—ã–π|–ø—Ä–∏–∫–æ–ª—å–Ω—ã–π",
                r"good bot|great bot|awesome|perfect|excellent"
            ],
            "help_request": [
                r"–ø–æ–º–æ–≥–∏|–ø–æ–º–æ—â—å|help|—á—Ç–æ –¥–µ–ª–∞—Ç—å|–∫–∞–∫ –±—ã—Ç—å|–ø–æ–¥—Å–∫–∞–∂–∏",
                r"–ø–æ—Å–æ–≤–µ—Ç—É–π|–Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å|help me|–º–æ–∂–µ—à—å –ø–æ–º–æ—á—å"
            ],
            "technical_question": [
                r"–∫–æ–º–ø|–Ω–æ—É—Ç|–ø—Ä–æ–≥|–∫–æ–¥|–±–∞–≥|–æ—à–∏–±–∫|python|js|javascript",
                r"–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω|—Å–æ—Ñ—Ç|hardware|–≤–∏—Ä—É—Å|windows|linux|mac",
                r"—Ç–µ–ª–µ—Ñ–æ–Ω|–∞–Ω–¥—Ä–æ–∏–¥|ios|–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ|—Å–∞–π—Ç|—Å–µ—Ä–≤–µ—Ä"
            ],
            "personal_question": [
                r"–æ—Ç–Ω–æ—à–µ–Ω–∏|–ª—é–±–æ–≤|–¥–µ–≤—É—à–∫|–ø–∞—Ä–µ–Ω—å|—Å–µ–º—å|–∂–µ–Ω|–º—É–∂|–¥—Ä—É–≥|–ø–æ–¥—Ä—É–≥",
                r"–æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ|—Å–µ—Ä–¥—Ü–µ|—á—É–≤—Å—Ç–≤|—ç–º–æ—Ü–∏–∏|–ø–µ—Ä–µ–∂–∏–≤–∞|–≤–æ–ª–Ω—É–µ—Ç"
            ],
            "work_question": [
                r"—Ä–∞–±–æ—Ç|–Ω–∞—á–∞–ª—å–Ω–∏–∫|–∫–æ–ª–ª–µ–≥|—É–≤–æ–ª—å–Ω–µ–Ω|–∑–∞—Ä–ø–ª–∞—Ç|–¥–µ–Ω—å–≥|—Ñ–∏–Ω–∞–Ω—Å",
                r"–∫–∞—Ä—å–µ—Ä|–ø—Ä–æ—Ñ–µ—Å—Å–∏|–¥–æ–ª–∂–Ω–æ—Å—Ç|–æ—Ñ–∏—Å|–±–∏–∑–Ω–µ—Å|–ø—Ä–æ–µ–∫—Ç|–∑–∞–¥–∞—á"
            ],
            "weather_question": [
                r"–ø–æ–≥–æ–¥|–¥–æ–∂–¥—å|—Å–Ω–µ–≥|—Å–æ–ª–Ω—Ü|–≤–µ—Ç–µ—Ä|—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä|–≥—Ä–∞–¥—É—Å|—Ö–æ–ª–æ–¥–Ω",
                r"—Ç–µ–ø–ª|–∂–∞—Ä–∫|–º–æ—Ä–æ–∑|–≥—Ä–æ–∑–∞|–ª–∏–≤–µ–Ω—å|–º–µ—Ç–µ–ª—å|—è—Å–Ω–æ|–æ–±–ª–∞—á"
            ],
            "time_question": [
                r"–≤—Ä–µ–º|—á–∞—Å|—Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º—è|–∫–æ—Ç–æ—Ä—ã–π —á–∞—Å|–¥–∞—Ç–∞|–¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏",
                r"–∫–∞–∫–æ–µ —Å–µ–≥–æ–¥–Ω—è|—á–∏—Å–ª–æ|–º–µ—Å—è—Ü|–≥–æ–¥|–∫–∞–ª–µ–Ω–¥–∞—Ä—å"
            ],
            "joke_feedback": [
                r"—Å–º–µ—à–Ω–æ|—Ö–∞—Ö–∞|–ª–æ–ª|—Ä–∂—É|—É–≥–∞—Ä|–ø–æ—Ä–∂–∞–ª|üòÇ|üòÑ|üòÜ|ü§£",
                r"–Ω–µ—Å–º–µ—à–Ω–æ|–æ—Ç—Å—Ç–æ–π|–ø–ª–æ—Ö–∞—è —à—É—Ç–∫–∞|–Ω–µ —Å–º–µ—à–Ω–æ|—Ç–∞–∫ —Å–µ–±–µ"
            ]
        }
    
    def _init_greetings(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π"""
        self.greetings = {
            "formal": [
                "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –ª–∏—á–Ω—ã–π —Å–µ–∫—Ä–µ—Ç–∞—Ä—å –ì–∞–π—Ä–∞—Ç–∂–æ–Ω–∞. –ß–µ–º –º–æ–≥—É –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω?",
                "–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –ø–æ—Ä—É—á–∏–ª –º–Ω–µ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è. –°–ª—É—à–∞—é –≤–∞—Å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ.",
                "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é! –Ø –ø–æ–º–æ—â–Ω–∏–∫ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω–∞. –†–∞–¥ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤–∞—Å –≤ –Ω–∞—à–µ–º —á–∞—Ç–µ.",
            ],
            "friendly": [
                "–ü—Ä–∏–≤–µ—Ç! –Ø —Å–µ–∫—Ä–µ—Ç–∞—Ä—å –ì–∞–π—Ä–∞—Ç–∂–æ–Ω–∞. –ö–∞–∫ —É –≤–∞—Å –¥–µ–ª–∞?",
                "–ó–¥–∞—Ä–æ–≤–∞! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –∑–∞–Ω—è—Ç, –Ω–æ —è —Ç—É—Ç –∫–∞–∫ —Ç—É—Ç! –ß–µ–º –ø–æ–º–æ—á—å?",
                "–û, –ø—Ä–∏–≤–µ—Ç! –†–∞–¥ –≤–∏–¥–µ—Ç—å. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç, –∞ –ø–æ–∫–∞ —è –∫ –≤–∞—à–∏–º —É—Å–ª—É–≥–∞–º!",
            ],
            "funny": [
                "–ô–æ! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –º–µ–Ω—è –æ—Å—Ç–∞–≤–∏–ª –∑–∞ –≥–ª–∞–≤–Ω–æ–≥–æ. –ß–µ–≥–æ —Ö–æ—Ç–µ–ª–∏? üòé",
                "–°–ª—É—à–∞—é –≤–∞—Å! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –≤ –æ—Ç–∫–ª—é—á–∫–µ (–∫–æ–¥–∏—Ç), —è –Ω–∞ —Å–≤—è–∑–∏!",
                "–ê–ª–ª–æ! –≠—Ç–æ —Å–µ–∫—Ä–µ—Ç–∞—Ä—å –ì–∞–π—Ä–∞—Ç–∂–æ–Ω–∞. –•–æ–∑—è–∏–Ω —Å–ø–∏—Ç, —è –±–æ–¥—Ä—Å—Ç–≤—É—é!",
            ],
            "morning": [
                "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –ü—Ä–µ–∫—Ä–∞—Å–Ω–æ–≥–æ –¥–Ω—è! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –ø—Ä–æ—Å–∏–ª –ø–µ—Ä–µ–¥–∞—Ç—å –ø—Ä–∏–≤–µ—Ç.",
                "–£—Ç—Ä–æ –¥–æ–±—Ä—ã–º –Ω–µ –±—ã–≤–∞–µ—Ç, –Ω–æ —è —Å—Ç–∞—Ä–∞—é—Å—å! –ß–µ–º –ø–æ–º–æ—á—å?",
                "–° –¥–æ–±—Ä—ã–º —É—Ç—Ä–æ–º! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —É–∂–µ –≤ –∫–æ–¥–µ, —è –Ω–∞ —Å–≤—è–∑–∏!",
            ],
            "evening": [
                "–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å? –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Å–∫–æ—Ä–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è.",
                "–í–µ—á–µ—Ä –≤ —Ö–∞—Ç—É! –ß–∞–π, –∫–æ—Ñ–µ, –∞–Ω–µ–∫–¥–æ—Ç? –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –±—É–¥–µ—Ç –ø–æ–∑–∂–µ.",
                "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é –≤–µ—á–µ—Ä–æ–º! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –¥–æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–¥, —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç.",
            ],
            "returning": [
                "–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º! –†–∞–¥ —Å–Ω–æ–≤–∞ –≤–∞—Å –≤–∏–¥–µ—Ç—å. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Ç–æ–∂–µ –±—É–¥–µ—Ç —Ä–∞–¥.",
                "–û, –≤—ã —Å–Ω–æ–≤–∞ –∑–¥–µ—Å—å! –ü—Ä–∏—è—Ç–Ω–æ. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Å–∫–æ—Ä–æ –æ—Ç–≤–µ—Ç–∏—Ç.",
                "–†–∞–¥ –≤–∏–¥–µ—Ç—å –≤–∞—Å —Å–Ω–æ–≤–∞! –ö–∞–∫ –ø—Ä–æ—à–ª–æ –≤—Ä–µ–º—è —Å –Ω–∞—à–µ–π –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤—Å—Ç—Ä–µ—á–∏?",
            ]
        }
    
    def _init_jokes(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —à—É—Ç–æ–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º"""
        self.jokes = {
            "programming": [
                {
                    "text": "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –≤—á–µ—Ä–∞ —Ç–∞–∫ –¥–æ–ª–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–ª, —á—Ç–æ —É—Ç—Ä–æ–º –æ–±–Ω–∞—Ä—É–∂–∏–ª —Å–µ–±—è –≤ —à–∫–∞—Ñ—É. –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–ª!",
                    "rating": 5,
                    "tags": ["–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ", "–≥–∞–π—Ä–∞—Ç–∂–æ–Ω"]
                },
                {
                    "text": "–ü—Ä–∏—Ö–æ–¥–∏—Ç –±–∞–≥ –∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É –∏ –≥–æ–≤–æ—Ä–∏—Ç: '–£–º—Ä—É, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø—Ä–∞–≤–∏—à—å!' –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç: '–ù—É —É–º—Ä–∏, —è —Ç–µ–±—è –≤ —Å–ª–µ–¥—É—é—â–µ–º –∫–æ–º–º–∏—Ç–µ –≤–æ—Å–∫—Ä–µ—à—É'.",
                    "rating": 5,
                    "tags": ["–±–∞–≥–∏", "–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã"]
                },
                {
                    "text": "–û–ø—Ç–∏–º–∏—Å—Ç –≥–æ–≤–æ—Ä–∏—Ç: '–°—Ç–∞–∫–∞–Ω –Ω–∞–ø–æ–ª–æ–≤–∏–Ω—É –ø–æ–ª–æ–Ω'. –ü–µ—Å—Å–∏–º–∏—Å—Ç: '–°—Ç–∞–∫–∞–Ω –Ω–∞–ø–æ–ª–æ–≤–∏–Ω—É –ø—É—Å—Ç'. –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç: '–°—Ç–∞–∫–∞–Ω –≤ –¥–≤–∞ —Ä–∞–∑–∞ –±–æ–ª—å—à–µ, —á–µ–º –Ω—É–∂–Ω–æ'.",
                    "rating": 5,
                    "tags": ["–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã", "—Ñ–∏–ª–æ—Å–æ—Ñ–∏—è"]
                },
                {
                    "text": "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –Ω–∞ —Ä–∞–±–æ—Ç–µ. –ó–≤–æ–Ω–∏—Ç –º–∞–º–∞: '–°—ã–Ω–æ–∫, –∫–∞–∫ –¥–µ–ª–∞?' - '–ú–∞–º–∞, —è —Å–µ–π—á–∞—Å –∫–æ–¥ –ø–∏—à—É'. - '–ê –∫–æ–≥–¥–∞ –±—É–¥–µ—à—å –ø–∏—Å–∞—Ç—å?'",
                    "rating": 5,
                    "tags": ["–≥–∞–π—Ä–∞—Ç–∂–æ–Ω", "—Ä–∞–±–æ—Ç–∞"]
                },
                {
                    "text": "–õ—É—á—à–∏–π —Å–ø–æ—Å–æ–± –ø–æ–Ω—è—Ç—å –∫–æ–¥ ‚Äî —ç—Ç–æ —É–¥–∞–ª–∏—Ç—å –µ–≥–æ –∏ –Ω–∞–ø–∏—Å–∞—Ç—å –∑–∞–Ω–æ–≤–æ. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Ç–∞–∫ –∏ –¥–µ–ª–∞–µ—Ç!",
                    "rating": 4,
                    "tags": ["–∫–æ–¥", "–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ"]
                },
                {
                    "text": "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç ‚Äî —ç—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∫–æ—Ñ–µ –≤ –∫–æ–¥. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —ç—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç!",
                    "rating": 5,
                    "tags": ["–∫–æ—Ñ–µ", "–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã"]
                },
                {
                    "text": "–°–∫–æ–ª—å–∫–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –∑–∞–º–µ–Ω–∏—Ç—å –ª–∞–º–ø–æ—á–∫—É? –ù–∏ –æ–¥–Ω–æ–≥–æ, —ç—Ç–æ hardware –ø—Ä–æ–±–ª–µ–º–∞!",
                    "rating": 4,
                    "tags": ["–∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ"]
                },
                {
                    "text": "–°–∏–Ω–¥—Ä–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞: –∫–æ–≥–¥–∞ –ø—Ä–æ—Å—ã–ø–∞–µ—à—å—Å—è –Ω–æ—á—å—é –∏ –ø–æ–Ω–∏–º–∞–µ—à—å, —á—Ç–æ –∑–∞–±—ã–ª –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ—á–∫—É —Å –∑–∞–ø—è—Ç–æ–π 5 –ª–µ—Ç –Ω–∞–∑–∞–¥.",
                    "rating": 5,
                    "tags": ["—Å–∏–Ω–¥—Ä–æ–º", "–∫–æ–¥"]
                },
                {
                    "text": "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –µ–≥–æ –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç. –û–±—ã—á–Ω–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç '–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫' üòÑ",
                    "rating": 5,
                    "tags": ["–≥–∞–π—Ä–∞—Ç–∂–æ–Ω", "–∫–æ–¥"]
                },
                {
                    "text": "‚Äî –ü–æ—á–µ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã –ø—É—Ç–∞—é—Ç –•—ç–ª–ª–æ—É–∏–Ω –∏ –†–æ–∂–¥–µ—Å—Ç–≤–æ?\n‚Äî –ü–æ—Ç–æ–º—É —á—Ç–æ 31 Oct = 25 Dec.",
                    "rating": 5,
                    "tags": ["–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞", "–ø—Ä–∞–∑–¥–Ω–∏–∫–∏"]
                }
            ],
            "life": [
                {
                    "text": "–ò–¥–µ—Ç –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –ø–æ —É–ª–∏—Ü–µ, –≤–∏–¥–∏—Ç ‚Äî –ª–µ–∂–∏—Ç —Ä–æ—É—Ç–µ—Ä. –î—É–º–∞–µ—Ç: '–ù–∞–≤–µ—Ä–Ω–æ–µ, Wi-Fi –ø–æ—Ç–µ—Ä—è–ª'",
                    "rating": 4,
                    "tags": ["–≥–∞–π—Ä–∞—Ç–∂–æ–Ω", "–∏–Ω—Ç–µ—Ä–Ω–µ—Ç"]
                },
                {
                    "text": "–ó–Ω–∞–µ—Ç–µ, —á–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞? –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –∑–Ω–∞–µ—Ç, —á—Ç–æ 'ctrl+Z' —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ –≤–µ–∑–¥–µ!",
                    "rating": 4,
                    "tags": ["–∂–∏–∑–Ω–µ–Ω–Ω–æ–µ", "–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã"]
                },
                {
                    "text": "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Å–µ–≥–æ–¥–Ω—è –ø—ã—Ç–∞–ª—Å—è –≤—ã–π—Ç–∏ –∏–∑ –¥–æ–º–∞ —á–µ—Ä–µ–∑ –∑–µ—Ä–∫–∞–ª–æ. –î—É–º–∞–ª, —ç—Ç–æ –ø–æ—Ä—Ç–∞–ª –≤ –¥—Ä—É–≥–æ–π –º–∏—Ä!",
                    "rating": 4,
                    "tags": ["–≥–∞–π—Ä–∞—Ç–∂–æ–Ω", "–∑–∞–±–∞–≤–Ω–æ–µ"]
                },
                {
                    "text": "–£—Ç—Ä–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–µ —Å –∫–æ—Ñ–µ, –∞ —Å 'git pull'.",
                    "rating": 4,
                    "tags": ["—É—Ç—Ä–æ", "git"]
                },
                {
                    "text": "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –Ω–µ —Å–ø–∏—Ç, –æ–Ω –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è!",
                    "rating": 5,
                    "tags": ["–≥–∞–π—Ä–∞—Ç–∂–æ–Ω", "—Å–æ–Ω"]
                }
            ],
            "geek": [
                {
                    "text": "–ö–∞–∫ —Ä–∞—Å—Å–º–µ—à–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞? –†–∞—Å—Å–∫–∞–∑–∞—Ç—å –µ–º—É —à—É—Ç–∫—É –ø—Ä–æ 01.01.1970",
                    "rating": 5,
                    "tags": ["timestamp", "–≥–µ–∫–∏"]
                },
                {
                    "text": "–ß—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç, –∫–æ–≥–¥–∞ –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è? '01001110 01101111 01110111'",
                    "rating": 4,
                    "tags": ["–±–∏–Ω–∞—Ä–Ω—ã–π –∫–æ–¥", "—É—Ç—Ä–æ"]
                },
                {
                    "text": "–ï—Å—Ç—å 10 —Ç–∏–ø–æ–≤ –ª—é–¥–µ–π: —Ç–µ, –∫—Ç–æ –ø–æ–Ω–∏–º–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω—ã–π –∫–æ–¥, –∏ —Ç–µ, –∫—Ç–æ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç.",
                    "rating": 5,
                    "tags": ["–±–∏–Ω–∞—Ä–Ω—ã–π –∫–æ–¥", "–≥–µ–∫–∏"]
                },
                {
                    "text": "–í –º–∏—Ä–µ –µ—Å—Ç—å 10 —Ç–∏–ø–æ–≤ –ª—é–¥–µ–π: —Ç–µ, –∫—Ç–æ –ø–æ–Ω–∏–º–∞–µ—Ç —ç—Ç—É —à—É—Ç–∫—É, –∏ —Ç–µ, –∫—Ç–æ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç, –ø–æ—á–µ–º—É –∏—Ö 10.",
                    "rating": 5,
                    "tags": ["–±–∏–Ω–∞—Ä–Ω—ã–π –∫–æ–¥", "—à—É—Ç–∫–∞"]
                }
            ],
            "short": [
                {
                    "text": "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –∑–∞ –∫–æ–º–ø–æ–º ‚Äî –∫–æ–¥ –ø–∏—à–µ—Ç—Å—è —Å–∞–º!",
                    "rating": 3,
                    "tags": ["–∫–æ—Ä–æ—Ç–∫–∏–µ"]
                },
                {
                    "text": "–ö–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç? –ü–æ–∑–æ–≤–∏ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω–∞!",
                    "rating": 3,
                    "tags": ["–∫–æ—Ä–æ—Ç–∫–∏–µ"]
                },
                {
                    "text": "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω: 'It's not a bug, it's a feature'",
                    "rating": 4,
                    "tags": ["–∫–æ—Ä–æ—Ç–∫–∏–µ"]
                }
            ],
            "dark": [
                {
                    "text": "–ü—Ä–∏—Ö–æ–¥–∏—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –∫ –≤—Ä–∞—á—É:\n- –î–æ–∫—Ç–æ—Ä, —É –º–µ–Ω—è –¥–µ–ø—Ä–µ—Å—Å–∏—è.\n- –ê –≤—ã –ø—Ä–æ–±–æ–≤–∞–ª–∏ –≤—ã–π—Ç–∏ –Ω–∞ —É–ª–∏—Ü—É?\n- –Ø –ø—Ä–æ–±–æ–≤–∞–ª, –Ω–æ —Ç–∞–º –Ω–µ—Ç Wi-Fi.",
                    "rating": 4,
                    "tags": ["—Ç–µ–º–Ω—ã–π —é–º–æ—Ä"]
                },
                {
                    "text": "‚Äî –ú–∞–º–∞, —è —Ä–µ—à–∏–ª —Å—Ç–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–º!\n‚Äî –°—ã–Ω–æ–∫, –Ω–æ —ç—Ç–æ –∂–µ –Ω–∞ –≤—Å—é –∂–∏–∑–Ω—å!\n‚Äî –ú–∞–º–∞, —ç—Ç–æ –ø—Ä–∏–≥–æ–≤–æ—Ä?",
                    "rating": 4,
                    "tags": ["—Ç–µ–º–Ω—ã–π —é–º–æ—Ä"]
                }
            ],
            "relationship": [
                {
                    "text": "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Å–ø—Ä–æ—Å–∏–ª —É –¥–µ–≤—É—à–∫–∏: '–¢—ã –ø—Ä–∏–¥–µ—à—å –∫–æ –º–Ω–µ –∫–æ–¥ –ø–∏—Å–∞—Ç—å?' –û–Ω–∞ —Å–æ–≥–ª–∞—Å–∏–ª–∞—Å—å. –¢–µ–ø–µ—Ä—å —É –Ω–∏—Ö 2 –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ –≤ —Å–µ–º—å–µ!",
                    "rating": 4,
                    "tags": ["–æ—Ç–Ω–æ—à–µ–Ω–∏—è"]
                },
                {
                    "text": "–õ—É—á—à–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ –æ–Ω–∞ –≥–æ–≤–æ—Ä–∏—Ç '–æ–±–Ω–∏–º–∏ –º–µ–Ω—è', –∞ —Ç—ã –æ—Ç–≤–µ—á–∞–µ—à—å 'git push'",
                    "rating": 4,
                    "tags": ["–æ—Ç–Ω–æ—à–µ–Ω–∏—è", "git"]
                }
            ]
        }
    
    def _init_facts(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤"""
        self.facts = [
            {
                "text": "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –æ–¥–Ω–∞–∂–¥—ã –Ω–∞–ø–∏—Å–∞–ª –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–ª —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞. –≠—Ç–æ –±—ã–ª–æ 29 —Ñ–µ–≤—Ä–∞–ª—è –≤ –≤–∏—Å–æ–∫–æ—Å–Ω—ã–π –≥–æ–¥!",
                "category": "about_gayratjon"
            },
            {
                "text": "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –ø—å–µ—Ç –∫–æ—Ñ–µ —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Å–æ–ª–∏. –ë–µ–∑ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞!",
                "category": "about_gayratjon"
            },
            {
                "text": "90% –≤—Ä–µ–º–µ–Ω–∏ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –¥—É–º–∞–µ—Ç, 10% ‚Äî –ø–∏—à–µ—Ç –∫–æ–¥. –ù–æ –∫–æ–¥ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –Ω–∞ –≤—Å–µ 100%!",
                "category": "about_gayratjon"
            },
            {
                "text": "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω —É—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –µ–≥–æ –∫–æ—Ç –ª—É—á—à–µ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –∫–æ–¥, —á–µ–º –ª—é–±–æ–π QA-–∏–Ω–∂–µ–Ω–µ—Ä!",
                "category": "about_gayratjon"
            },
            {
                "text": "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –º–æ–∂–µ—Ç –æ–±—ä—è—Å–Ω–∏—Ç—å –ª—é–±–æ–π –±–∞–≥ –æ–¥–Ω–æ–π —Ñ—Ä–∞–∑–æ–π: '–≠—Ç–æ –Ω–µ –±–∞–≥, —ç—Ç–æ —Ñ–∏—á–∞'",
                "category": "about_gayratjon"
            },
            {
                "text": "–ó–Ω–∞–µ—Ç–µ –ª–∏ –≤—ã, —á—Ç–æ –±–∞–Ω–∞–Ω—ã —Ä–∞–¥–∏–æ–∞–∫—Ç–∏–≤–Ω—ã? –í –Ω–∏—Ö –º–Ω–æ–≥–æ –∫–∞–ª–∏—è-40!",
                "category": "science"
            },
            {
                "text": "–û—Å—å–º–∏–Ω–æ–≥–∏ –∏–º–µ—é—Ç —Ç—Ä–∏ —Å–µ—Ä–¥—Ü–∞ –∏ –≥–æ–ª—É–±—É—é –∫—Ä–æ–≤—å!",
                "category": "animals"
            },
            {
                "text": "–í –Ø–ø–æ–Ω–∏–∏ –µ—Å—Ç—å –æ—Å—Ç—Ä–æ–≤, –≥–¥–µ –∂–∏–≤—É—Ç —Ç–æ–ª—å–∫–æ –∫—Ä–æ–ª–∏–∫–∏!",
                "category": "travel"
            },
            {
                "text": "–ê–≤–æ–∫–∞–¥–æ ‚Äî —ç—Ç–æ —è–≥–æ–¥–∞, –∞ –Ω–µ –æ–≤–æ—â!",
                "category": "food"
            },
            {
                "text": "–ö–æ—Ç—ã –Ω–µ —Ä–∞–∑–ª–∏—á–∞—é—Ç —Å–ª–∞–¥–∫–∏–π –≤–∫—É—Å –∏–∑-–∑–∞ –≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–æ–π –º—É—Ç–∞—Ü–∏–∏.",
                "category": "animals"
            },
            {
                "text": "–û–±–ª–∞–∫–∞ –≤–µ—Å—è—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ –∫–∞–∫ 100 —Å–ª–æ–Ω–æ–≤!",
                "category": "science"
            },
            {
                "text": "–í–∞—à –∂–µ–ª—É–¥–æ–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –Ω–æ–≤—ã–π —Å–ª–æ–π —Å–ª–∏–∑–∏ –∫–∞–∂–¥—ã–µ –¥–≤–µ –Ω–µ–¥–µ–ª–∏, –∏–Ω–∞—á–µ –æ–Ω –ø–µ—Ä–µ–≤–∞—Ä–∏–ª –±—ã —Å–∞–º —Å–µ–±—è.",
                "category": "body"
            },
            {
                "text": "–í –®–≤–µ–π—Ü–∞—Ä–∏–∏ –∑–∞–ø—Ä–µ—â–µ–Ω–æ –¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –º–æ—Ä—Å–∫—É—é —Å–≤–∏–Ω–∫—É ‚Äî –æ–Ω–∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –∂–∏–≤–æ—Ç–Ω—ã–µ!",
                "category": "law"
            },
            {
                "text": "–ù–∞–ø–æ–ª–µ–æ–Ω –æ–¥–Ω–∞–∂–¥—ã –±—ã–ª –∞—Ç–∞–∫–æ–≤–∞–Ω –∫—Ä–æ–ª–∏–∫–∞–º–∏. –î–∞-–¥–∞, –Ω–∞—Å—Ç–æ—è—â–∏–º–∏ –∫—Ä–æ–ª–∏–∫–∞–º–∏!",
                "category": "history"
            },
            {
                "text": "–í–æ –§—Ä–∞–Ω—Ü–∏–∏ –∑–∞–∫–æ–Ω –∑–∞–ø—Ä–µ—â–∞–µ—Ç –Ω–∞–∑—ã–≤–∞—Ç—å —Å–≤–∏–Ω—å—é –∏–º–µ–Ω–µ–º –ù–∞–ø–æ–ª–µ–æ–Ω.",
                "category": "law"
            }
        ]
    
    def _init_questions(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã"""
        self.question_responses = {
            "who_are_you": [
                "–Ø –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –ì–∞–π—Ä–∞—Ç–∂–æ–Ω–∞. –ù—É, –ø–æ—á—Ç–∏ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π. –õ–∞–¥–Ω–æ, –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ ü§ñ",
                "–Ø –ª–∏—á–Ω—ã–π —Å–µ–∫—Ä–µ—Ç–∞—Ä—å –ì–∞–π—Ä–∞—Ç–∂–æ–Ω–∞. –°–æ–∑–¥–∞–Ω, —á—Ç–æ–±—ã —Ä–∞–∑–≤–ª–µ–∫–∞—Ç—å –≥–æ—Å—Ç–µ–π, –ø–æ–∫–∞ —Ö–æ–∑—è–∏–Ω –∑–∞–Ω—è—Ç.",
                "–ú–µ–Ω—è –∑–æ–≤—É—Ç –°–µ–∫—Ä–µ—Ç–∞—Ä—å-–±–æ—Ç. –ú–æ—è –º–∏—Å—Å–∏—è ‚Äî –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å –∞–Ω–µ–∫–¥–æ—Ç—ã!",
                "–Ø ‚Äî —Ü–∏—Ñ—Ä–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ì–∞–π—Ä–∞—Ç–∂–æ–Ω–∞. –†–∞–±–æ—Ç–∞—é 24/7 –±–µ–∑ –≤—ã—Ö–æ–¥–Ω—ã—Ö –∏ –∫–æ—Ñ–µ-–±—Ä–µ–π–∫–æ–≤!",
                "–Ø –ø—Ä–æ–≥—Ä–∞–º–º–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–≥–∞–µ—Ç –ì–∞–π—Ä–∞—Ç–∂–æ–Ω—É –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –≤–∞–∂–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –ê –µ—â–µ —è —É–º–µ—é —à—É—Ç–∏—Ç—å!"
            ],
            "how_are_you": [
                "–£ –º–µ–Ω—è –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ! –ñ–¥—É, –∫–æ–≥–¥–∞ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –¥–æ–ø–∏—à–µ—Ç –∫–æ–¥ –∏ –º—ã –ø–æ–π–¥–µ–º –ø–∏—Ç—å –∫–æ—Ñ–µ!",
                "–†–∞–±–æ—Ç–∞—é 24/7 –±–µ–∑ –≤—ã—Ö–æ–¥–Ω—ã—Ö. –ù–æ –Ω–µ –∂–∞–ª—É—é—Å—å, –º–Ω–µ –∑–∞ —ç—Ç–æ –∫–æ–¥ –ø–ª–∞—Ç—è—Ç!",
                "–Ø –≤ –ø–æ—Ä—è–¥–∫–µ, —Å–ø–∞—Å–∏–±–æ! –°–∞–º –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Ç–æ–∂–µ –≤ –ø–æ—Ä—è–¥–∫–µ, –ø—Ä–æ—Å—Ç–æ –æ—á–µ–Ω—å –∑–∞–Ω—è—Ç.",
                "–ù–æ—Ä–º–∞–ª—å–Ω–æ, —Ö–æ—Ç—è –±–µ–∑ –∫–æ—Ñ–µ —Ç—è–∂–µ–ª–æ–≤–∞—Ç–æ. –ê —É –≤–∞—Å –∫–∞–∫ –¥–µ–ª–∞?",
                "–õ—É—á—à–µ –≤—Å–µ—Ö! –ü–æ—Ç–æ–º—É —á—Ç–æ —è –±–æ—Ç –∏ —É –º–µ–Ω—è –Ω–µ –±—ã–≤–∞–µ—Ç –ø–ª–æ—Ö–∏—Ö –¥–Ω–µ–π üòÑ"
            ],
            "where_gayratjon": [
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Å–µ–π—á–∞—Å –ø–∏—à–µ—Ç –∫–æ–¥. –û–±–µ—â–∞–ª —Å–∫–æ—Ä–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è!",
                "–•–æ–∑—è–∏–Ω –≤ –æ—Ç–ª–∞–¥–∫–µ. –ë—É–¥–µ—Ç —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è.",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –∑–∞–Ω—è—Ç –≤–∞–∂–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º. –Ø –ø–µ—Ä–µ–¥–∞–º, —á—Ç–æ –≤—ã —Å–ø—Ä–∞—à–∏–≤–∞–ª–∏!",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –≤ –∑–æ–Ω–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (—á–∏—Ç–∞–π: —Ä–∞–±–æ—Ç–∞–µ—Ç). –û—Å–≤–æ–±–æ–¥–∏—Ç—Å—è ‚Äî –æ—Ç–≤–µ—Ç–∏—Ç!",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –≥–¥–µ-—Ç–æ –≥–ª—É–±–æ–∫–æ –≤ –∫–æ–¥–µ. –ï—Å–ª–∏ –Ω–µ –æ—Ç–≤–µ—Ç–∏—Ç –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è, –≤–æ–∑–º–æ–∂–Ω–æ, –æ–Ω –Ω–∞—à–µ–ª –±–∞–≥ –∏ –ø—ã—Ç–∞–µ—Ç—Å—è –µ–≥–æ –ø–æ–±–µ–¥–∏—Ç—å."
            ],
            "what_doing": [
                "–û—Ç–≤–µ—á–∞—é –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è, —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—é –∞–Ω–µ–∫–¥–æ—Ç—ã –∏ –∂–¥—É, –∫–æ–≥–¥–∞ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è.",
                "–°–ª–µ–∂—É –∑–∞ –ø–æ—Ä—è–¥–∫–æ–º, –ø–æ–∫–∞ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –≤ –æ—Ç–∫–ª—é—á–∫–µ. –ú–æ–≥—É –∏ –≤–∞–º –ø–æ–º–æ—á—å!",
                "–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –£ –≤–∞—Å –∫–∞–∫ —Ä–∞–∑ –≤—Ö–æ–¥—è—â–µ–µ, —è –æ—Ç–≤–µ—á–∞—é!",
                "–ü—ã—Ç–∞—é—Å—å –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º, –ø–æ–∫–∞ —Ö–æ–∑—è–∏–Ω –∑–∞–Ω—è—Ç. –ê –≤–æ–æ–±—â–µ, –º–µ—á—Ç–∞—é –Ω–∞—É—á–∏—Ç—å—Å—è –≤–∞—Ä–∏—Ç—å –∫–æ—Ñ–µ.",
                "–î–µ–∂—É—Ä—É –Ω–∞ –ø–æ—Å—Ç—É. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∞–Ω–µ–∫–¥–æ—Ç –∏–ª–∏ —Ñ–∞–∫—Ç ‚Äî –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å!"
            ],
            "when_gayratjon_answers": [
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –æ—Ç–≤–µ—Ç–∏—Ç, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –∑–∞–∫–æ–Ω—á–∏—Ç —Ç–µ–∫—É—â—É—é –∑–∞–¥–∞—á—É. –û–±—ã—á–Ω–æ —ç—Ç–æ –Ω–µ–¥–æ–ª–≥–æ!",
                "–°–∫–æ—Ä–æ! –û–Ω —É–∂–µ –¥–æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–¥ (–∏–ª–∏ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ—Ç, –Ω–æ –æ–±–µ—â–∞–µ—Ç –±—ã—Å—Ç—Ä–æ).",
                "–î—É–º–∞—é, –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è. –ê –ø–æ–∫–∞ –º–æ–≥—É —Ä–∞–∑–≤–ª–µ—á—å –≤–∞—Å –∞–Ω–µ–∫–¥–æ—Ç–æ–º!",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –∑–Ω–∞–µ—Ç, —á—Ç–æ –≤—ã –∂–¥–µ—Ç–µ. –û–Ω –æ—Ç–≤–µ—Ç–∏—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏!",
                "–¢–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ, –Ω–æ –æ–Ω —Ç–æ—á–Ω–æ –Ω–µ –∑–∞–±—ã–ª –æ –≤–∞—Å!"
            ]
        }
    
    def _init_problems(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã"""
        self.problem_responses = {
            "technical": [
                "–û–ø–∏—à–∏—Ç–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é –ø—Ä–æ–±–ª–µ–º—É –ø–æ–¥—Ä–æ–±–Ω–µ–µ. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Ä–∞–∑–±–∏—Ä–∞–µ—Ç—Å—è –≤ Python, JavaScript, –±–∞–≥–∞—Ö, –∫–æ—Ñ–µ –∏ –∫–æ—Ç–∞—Ö.",
                "–≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ –±–∞–≥ –≤ –º–∞—Ç—Ä–∏—Ü–µ. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –ø–æ—Å–º–æ—Ç—Ä–∏—Ç, –∫–∞–∫ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è!",
                "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞? –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Å–∫–∞–∑–∞–ª: '–ü–æ–ø—Ä–æ–±—É–π –≤—ã–∫–ª—é—á–∏—Ç—å –∏ –≤–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ' üòâ",
                "–ß—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç? –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –ª—é–±–∏—Ç –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏, —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –Ω–∞–π—Ç–∏ —Ä–µ—à–µ–Ω–∏–µ.",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Å—Ç–∞–ª–∫–∏–≤–∞–ª—Å—è —Å —Ä–∞–∑–Ω—ã–º–∏ –±–∞–≥–∞–º–∏. –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –¥–µ—Ç–∞–ª–∏, –æ–Ω —Ä–∞–∑–±–µ—Ä–µ—Ç—Å—è!"
            ],
            "personal": [
                "–ü–æ–Ω–∏–º–∞—é. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Ç–æ–∂–µ —á–∞—Å—Ç–æ —Å —ç—Ç–∏–º —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è. –û–Ω –ø–µ—Ä–µ–∑–≤–æ–Ω–∏—Ç!",
                "–°–ª–æ–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –æ–±–µ—â–∞–ª —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –ª–∏—á–Ω–æ.",
                "–Ø –∑–∞–ø–∏—Å–∞–ª –≤–∞—à–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –æ—Ç–≤–µ—Ç–∏—Ç, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –¥–æ–ø—å–µ—Ç –∫–æ—Ñ–µ (—ç—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è ‚òï)",
                "–õ–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç –æ–±—Å—É–∂–¥–∞—Ç—å —Å–∞–º. –û–Ω —Å–∫–æ—Ä–æ —Å–≤—è–∂–µ—Ç—Å—è!",
                "–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–º–µ—á–µ–Ω–æ –∫–∞–∫ –≤–∞–∂–Ω–æ–µ. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –æ—Ç–≤–µ—Ç–∏—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏."
            ],
            "urgent": [
                "–°—Ä–æ—á–Ω–æ? –•–æ—Ä–æ—à–æ, —è –ø–µ—Ä–µ–¥–∞–º –ì–∞–π—Ä–∞—Ç–∂–æ–Ω—É –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å!",
                "–ü–æ–Ω—è–ª, –≤–∞–∂–Ω–æ. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω—É —É–∂–µ –ª–µ—Ç–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω!",
                "–û—Ç–º–µ—á–µ–Ω–æ –∫–∞–∫ '–í–∞–∂–Ω–æ'. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Å–∫–æ—Ä–æ —Å–≤—è–∂–µ—Ç—Å—è!",
                "–ö—Ä–∏—Ç–∏—á–Ω–æ? –ü–µ—Ä–µ–¥–∞—é —Ö–æ–∑—è–∏–Ω—É –≤–Ω–µ –æ—á–µ—Ä–µ–¥–∏!",
                "–ï—Å–ª–∏ —ç—Ç–æ –æ—á–µ–Ω—å —Å—Ä–æ—á–Ω–æ, –º–æ–∂–µ—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–∑–≤–æ–Ω–∏—Ç—å. –ê —è –ø–æ–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ!"
            ],
            "work": [
                "–†–∞–±–æ—á–∏–µ –≤–æ–ø—Ä–æ—Å—ã? –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Ä–∞–∑–±–µ—Ä–µ—Ç—Å—è. –ß—Ç–æ –∏–º–µ–Ω–Ω–æ —Å–ª—É—á–∏–ª–æ—Å—å?",
                "–ü–æ —Ä–∞–±–æ—Ç–µ? –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –ª—é–±–∏—Ç, –∫–æ–≥–¥–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –¥–µ–ª—É. –Ø –ø–µ—Ä–µ–¥–∞–ª –µ–º—É –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ."
            ],
            "study": [
                "–£—á–µ–±–∞? –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Å–∞–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —É—á–∏—Ç—Å—è. –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?",
                "–ü–æ –ø–æ–≤–æ–¥—É —É—á–µ–±—ã –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –º–æ–∂–µ—Ç –º–Ω–æ–≥–æ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å. –û–Ω –æ—Ç–≤–µ—Ç–∏—Ç –ø–æ–∑–∂–µ!",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Ç–æ–∂–µ —É—á–∏–ª—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é. –°–ø—Ä–æ—Å–∏—Ç–µ –µ–≥–æ, –∫–æ–≥–¥–∞ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è!"
            ]
        }
    
    def _init_technical(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤"""
        self.technical_responses = {
            "python": [
                "Python ‚Äî –ª—é–±–∏–º—ã–π —è–∑—ã–∫ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω–∞. –û–Ω –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –Ω–∞ –Ω–µ–º –º–æ–∂–Ω–æ –≤—Å—ë!",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –ø–∏—à–µ—Ç –Ω–∞ Python —É–∂–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–µ—Ç. –ú–æ–∂–µ—Ç –ø–æ–º–æ—á—å —Å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º.",
                "Python –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ—Ç–æ–≤, –∫—Å—Ç–∞—Ç–∏. –Ø —Ç–æ–º—É –ø—Ä–∏–º–µ—Ä!"
            ],
            "javascript": [
                "JavaScript ‚Äî —ç—Ç–æ —è–∑—ã–∫ –≤–µ–±–∞. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –∑–Ω–∞–µ—Ç –∏ –µ–≥–æ!",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –±–µ–∑ JS —Å–µ–π—á–∞—Å –Ω–∏–∫—É–¥–∞. –ú–æ–∂–µ—Ç –ø–æ–º–æ—á—å —Å –∫–æ–¥–æ–º.",
                "JavaScript –±—ã–≤–∞–µ—Ç —Å–ª–æ–∂–Ω—ã–º, –Ω–æ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Ä–∞–∑–±–µ—Ä–µ—Ç—Å—è!"
            ],
            "bug": [
                "–ë–∞–≥ ‚Äî —ç—Ç–æ –Ω–µ –æ—à–∏–±–∫–∞, —ç—Ç–æ –Ω–µ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å!",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω —É–∂–µ –∏—â–µ—Ç —ç—Ç–æ—Ç –±–∞–≥. –û–±—ã—á–Ω–æ –æ–Ω –ø—Ä—è—á–µ—Ç—Å—è –≤ —Å–∞–º–æ–º –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–º –º–µ—Å—Ç–µ.",
                "–ë–∞–≥–∏ –±–æ—è—Ç—Å—è –ì–∞–π—Ä–∞—Ç–∂–æ–Ω–∞. –û–Ω –∏—Ö –æ—Ç–ª–∞–≤–ª–∏–≤–∞–µ—Ç –ø–∞—á–∫–∞–º–∏!"
            ],
            "database": [
                "–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö ‚Äî —ç—Ç–æ —Å–≤—è—Ç–æ–µ. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –∑–Ω–∞–µ—Ç SQL –∫–∞–∫ —Å–≤–æ–∏ –ø—è—Ç—å –ø–∞–ª—å—Ü–µ–≤.",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Å PostgreSQL –∏ MongoDB. –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?",
                "–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–æ –Ω–µ –Ω–∞—Ä—É—à–∞–µ—Ç!"
            ]
        }
    
    def _init_farewells(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—â–∞–Ω–∏–π"""
        self.farewells = {
            "normal": [
                "–î–æ —Å–≤–∏–¥–∞–Ω–∏—è! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω—É –±—É–¥–µ—Ç –ø—Ä–∏—è—Ç–Ω–æ —É–∑–Ω–∞—Ç—å, —á—Ç–æ –≤—ã –∑–∞—Ö–æ–¥–∏–ª–∏!",
                "–í—Å–µ–≥–æ —Ö–æ—Ä–æ—à–µ–≥–æ! –ó–∞—Ö–æ–¥–∏—Ç–µ –µ—â–µ, –∫–æ–≥–¥–∞ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è!",
                "–ü–æ–∫–∞! –ü–µ—Ä–µ–¥–∞–º –ì–∞–π—Ä–∞—Ç–∂–æ–Ω—É, —á—Ç–æ –≤—ã —Å–ø—Ä–∞—à–∏–≤–∞–ª–∏! üëã",
                "–î–æ —Å–≤—è–∑–∏! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –æ—Ç–≤–µ—Ç–∏—Ç, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –≤—ã–π–¥–µ—Ç –∏–∑ –Ω–∏—Ä–≤–∞–Ω—ã (–∑–∞–∫–æ–Ω—á–∏—Ç –∫–æ–¥)",
                "–°—á–∞—Å—Ç–ª–∏–≤–æ! –ï—Å–ª–∏ —á—Ç–æ, —è –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏!"
            ],
            "friendly": [
                "–ü–æ–∫–∞-–ø–æ–∫–∞! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω—É –ø—Ä–∏–≤–µ—Ç –ø–µ—Ä–µ–¥–∞—Ç—å?",
                "–£–¥–∞—á–∏! –ó–∞—Ö–æ–¥–∏, –µ—Å–ª–∏ —á—ë, –ø–æ–±–æ–ª—Ç–∞–µ–º!",
                "–ë—ã–≤–∞–π! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω—É —Å–∫–∞–∂—É, —á—Ç–æ —Ç—ã –∑–∞—Ö–æ–¥–∏–ª!",
                "–î–æ —Å–∫–æ—Ä–æ–≥–æ! –ë—É–¥—É —Å–∫—É—á–∞—Ç—å (–Ω—É, –∫–∞–∫ –±–æ—Ç –º–æ–∂–µ—Ç —Å–∫—É—á–∞—Ç—å üòÑ)",
                "–ü–æ–∫–µ–¥–∞! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω—É —É–∂–µ —à–ª—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ!"
            ],
            "funny": [
                "–û—Ç–±–æ–π! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –≤ –∏–≥—Ä—É –≤—Å—Ç—É–ø–∞–µ—Ç... –ø–æ–∑–∂–µ!",
                "–£–ª–µ—Ç–∞—é –≤ –æ–±–ª–∞–∫–æ, –Ω–æ –µ—Å–ª–∏ —á—Ç–æ ‚Äî —è —Ç—É—Ç –∫–∞–∫ —Ç—É—Ç!",
                "–ü–æ–∫–∞! –ù–µ —Å–∫—É—á–∞–π –±–µ–∑ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω–∞ —Å–ª–∏—à–∫–æ–º —Å–∏–ª—å–Ω–æ!",
                "–î–æ –≤—Å—Ç—Ä–µ—á–∏! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —É–∂–µ —á–µ—à–µ—Ç —Ä–µ–ø—É, —á—Ç–æ–±—ã –æ—Ç–≤–µ—Ç–∏—Ç—å!",
                "–ê–±–æ–Ω–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –Ω–æ –µ–≥–æ –±–æ—Ç ‚Äî –≤–ø–æ–ª–Ω–µ! –ü–æ–∫–∞!"
            ]
        }
    
    def _init_small_talk(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è —Å–≤–µ—Ç—Å–∫–æ–π –±–µ—Å–µ–¥—ã"""
        self.small_talk = {
            "weather": [
                "–ü–æ–≥–æ–¥–∞ ‚Äî —à—Ç—É–∫–∞ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è, –∫–∞–∫ –∫–æ–¥ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω–∞!",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –ª—É—á—à–∞—è –ø–æ–≥–æ–¥–∞ –¥–ª—è –∫–æ–¥–∏–Ω–≥–∞ ‚Äî –ª—é–±–∞—è, –ª–∏—à—å –±—ã –∫–æ—Ñ–µ –±—ã–ª!",
                "–ê —É –Ω–∞—Å –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –º–∏—Ä–µ –≤—Å–µ–≥–¥–∞ —Å–æ–ª–Ω–µ—á–Ω–æ!",
                "–ü–æ–≥–æ–¥–∞ –Ω–µ –≤–∞–∂–Ω–∞, –∫–æ–≥–¥–∞ –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç!"
            ],
            "time": [
                "–í—Ä–µ–º—è –ª–µ—Ç–∏—Ç, –∫–æ–≥–¥–∞ –ø–∏—à–µ—à—å –∫–æ–¥. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —ç—Ç–æ —á–∞—Å—Ç–æ –∑–∞–º–µ—á–∞–µ—Ç!",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –≤—Ä–µ–º—è ‚Äî –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è —à—Ç—É–∫–∞, –æ—Å–æ–±–µ–Ω–Ω–æ –ø–µ—Ä–µ–¥ –¥–µ–¥–ª–∞–π–Ω–æ–º.",
                "–í—Ä–µ–º—è ‚Äî –¥–µ–Ω—å–≥–∏, –∞ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ ‚Äî –µ—â–µ –∏ —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞!"
            ],
            "hobby": [
                "–•–æ–±–±–∏ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω–∞ ‚Äî –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–æ—Ñ–µ. –ò–Ω–æ–≥–¥–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ!",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –ª—é–±–∏—Ç —á–∏—Ç–∞—Ç—å –ø—Ä–æ –Ω–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∏–Ω–æ–≥–¥–∞ –∏–≥—Ä–∞–µ—Ç –≤ –∏–≥—Ä—ã.",
                "–ö–æ–¥–∏–Ω–≥, –∫–æ—Ñ–µ, –∫–æ—Ç ‚Äî –≤–æ—Ç –∏ –≤—Å–µ —Ö–æ–±–±–∏ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω–∞!"
            ],
            "food": [
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç –ø–∏—â—É, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –µ—Å—Ç—å –æ–¥–Ω–æ–π —Ä—É–∫–æ–π, —á—Ç–æ–±—ã –¥—Ä—É–≥–æ–π –ø–∏—Å–∞—Ç—å –∫–æ–¥!",
                "–õ—É—á—à–∞—è –µ–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ ‚Äî –ø–∏—Ü—Ü–∞. –ú–æ–∂–Ω–æ –∑–∞–∫–∞–∑–∞—Ç—å –∏ –Ω–µ –æ—Ç–≤–ª–µ–∫–∞—Ç—å—Å—è!",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –∫–æ–¥ –≤–∞–∂–Ω–µ–µ –µ–¥—ã. –ù–æ –∫–æ—Ñ–µ ‚Äî –∏—Å–∫–ª—é—á–µ–Ω–∏–µ!"
            ]
        }
    
    def _init_proverbs(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–æ–≤–∏—Ü –∏ –ø–æ–≥–æ–≤–æ—Ä–æ–∫"""
        self.proverbs = [
            "–ö–æ–¥ –Ω–µ –≤–æ–ª–∫, –≤ –ª–µ—Å –Ω–µ —É–±–µ–∂–∏—Ç. –ù–æ –±–∞–≥–∏ ‚Äî –µ—â–µ –∫–∞–∫!",
            "–°–µ–º—å —Ä–∞–∑ –æ—Ç–º–µ—Ä—å, –æ–¥–∏–Ω —Ä–∞–∑ –∑–∞–∫–æ–º–º–∏—Ç—å!",
            "–ù–µ –∏–º–µ–π 100 —Ä—É–±–ª–µ–π, –∞ –∏–º–µ–π 100 –≥–∏–≥–∞–±–∞–π—Ç –æ–ø–µ—Ä–∞—Ç–∏–≤—ã!",
            "–°—Ç–∞—Ä—ã–π –±–∞–≥ –ª—É—á—à–µ –Ω–æ–≤—ã—Ö –¥–≤—É—Ö!",
            "–î–æ–≤–µ—Ä—è–π, –Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π (–∫–æ–¥)!",
            "–ß—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–æ –ø–µ—Ä–æ–º, –Ω–µ –≤—ã—Ä—É–±–∏—à—å —Ç–æ–ø–æ—Ä–æ–º. –ê –∫–æ–¥ ‚Äî –±–∞–≥-—Ä–µ–ø–æ—Ä—Ç–æ–º!",
            "–¢–∏—à–µ –µ–¥–µ—à—å ‚Äî –¥–∞–ª—å—à–µ –±—É–¥–µ—à—å (–æ—Ç –¥–µ–¥–ª–∞–π–Ω–∞)!",
            "–ì–ª–∞–∑–∞ –±–æ—è—Ç—Å—è, –∞ —Ä—É–∫–∏ –∫–æ–¥ –ø–∏—à—É—Ç!",
            "–ù–∞ –±–µ–∑—Ä—ã–±—å–µ –∏ –±–∞–≥ ‚Äî —Ñ–∏—á–∞!",
            "–ù–µ –≤—Å–µ –±–∞–≥–∏, —á—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç!"
        ]
    
    def _init_stories(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∏—Å—Ç–æ—Ä–∏–π"""
        self.stories = [
            {
                "title": "–ö–∞–∫ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –∫–æ–¥ –ø–∏—Å–∞–ª",
                "text": "–û–¥–Ω–∞–∂–¥—ã –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Å–µ–ª –ø–∏—Å–∞—Ç—å –∫–æ–¥ –≤ 9 —É—Ç—Ä–∞. –û—á–Ω—É–ª—Å—è ‚Äî —É–∂–µ 9 –≤–µ—á–µ—Ä–∞, –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∞ –∫–æ—Ñ–µ –æ—Å—Ç—ã–ª. –° —Ç–µ—Ö –ø–æ—Ä –æ–Ω –ø—å–µ—Ç —Ö–æ–ª–æ–¥–Ω—ã–π –∫–æ—Ñ–µ –∏ –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ —Ç–∞–∫ –¥–∞–∂–µ –≤–∫—É—Å–Ω–µ–µ!",
                "moral": "–ì–ª–∞–≤–Ω–æ–µ ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç!"
            },
            {
                "title": "–ë–∏—Ç–≤–∞ —Å –±–∞–≥–æ–º",
                "text": "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Ç—Ä–∏ –¥–Ω—è –±–æ—Ä–æ–ª—Å—è —Å –±–∞–≥–æ–º. –û–∫–∞–∑–∞–ª–æ—Å—å, —Ç–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π —Å—Ç–æ—è–ª–∞ –Ω–µ —Ç–∞–º. –¢–µ–ø–µ—Ä—å –æ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ—á–∫—É —Å –∑–∞–ø—è—Ç–æ–π –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å!",
                "moral": "–ò–Ω–æ–≥–¥–∞ –ø—Ä–æ–±–ª–µ–º–∞ –≤ –º–µ–ª–æ—á–∞—Ö"
            },
            {
                "title": "–ö–æ—Ñ–µ-–º–∞—à–∏–Ω–∞",
                "text": "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Ö–æ—Ç–µ–ª –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—Ñ–µ-–º–∞—à–∏–Ω—É –∫ Wi-Fi, —á—Ç–æ–±—ã –æ–Ω–∞ —Å–∞–º–∞ –≤–∞—Ä–∏–ª–∞ –∫–æ—Ñ–µ, –∫–æ–≥–¥–∞ –∫–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è. –ü–æ–∫–∞ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å, –Ω–æ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥ —ç—Ç–∏–º!",
                "moral": "–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è ‚Äî –Ω–∞—à–µ –≤—Å—ë"
            }
        ]
    
    def get_or_create_user(self, user_id: int, username: str = "", first_name: str = "", last_name: str = "") -> UserProfile:
        """–ü–æ–ª—É—á–∞–µ—Ç –∏–ª–∏ —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        if user_id not in self.users:
            self.users[user_id] = UserProfile(
                user_id=user_id,
                username=username,
                first_name=first_name,
                last_name=last_name
            )
            logger.info(f"–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {first_name} (ID: {user_id})")
        return self.users[user_id]
    
    def detect_intent(self, text: str) -> str:
        """–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        text_lower = text.lower()
        
        for intent, patterns in self.intent_patterns.items():
            for pattern in patterns:
                if re.search(pattern, text_lower):
                    return intent
        
        return "unknown"
    
    def analyze_sentiment(self, text: str) -> float:
        """–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç -1 –¥–æ 1)"""
        text_lower = text.lower()
        
        positive_words = [
            "—Ö–æ—Ä–æ—à", "–æ—Ç–ª–∏—á–Ω", "–ø—Ä–µ–∫—Ä–∞—Å–Ω", "–∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω", "–∫–ª–∞—Å—Å", "—Å—É–ø–µ—Ä",
            "–∫—Ä—É—Ç", "–º–æ–ª–æ–¥–µ—Ü", "—É–º–Ω–∏—Ü", "—Å–ø–∞—Å–∏–±", "–±–ª–∞–≥–æ–¥–∞—Ä", "üëç", "‚ù§Ô∏è",
            "üòä", "üòÑ", "üòç", "üî•", "love", "great", "awesome", "perfect"
        ]
        
        negative_words = [
            "–ø–ª–æ—Ö", "—É–∂–∞—Å–Ω", "–∫–æ—à–º–∞—Ä", "–æ—Ç–≤—Ä–∞—Ç–∏—Ç–µ–ª—å–Ω", "–≥–∞–¥–∫", "–¥—É—Ä–∞–∫",
            "–ø—Ä–∏–¥—É—Ä–æ–∫", "–∏–¥–∏–æ—Ç", "—Ç—É–ø", "–ª–æ—Ö", "–¥–µ–±–∏–ª", "üëé", "üò†",
            "üò°", "ü§¨", "bad", "terrible", "awful", "hate"
        ]
        
        score = 0.0
        for word in positive_words:
            if word in text_lower:
                score += 0.1
        
        for word in negative_words:
            if word in text_lower:
                score -= 0.1
        
        # –£—á–∏—Ç—ã–≤–∞–µ–º –¥–ª–∏–Ω—É —Å–æ–æ–±—â–µ–Ω–∏—è
        words = text.split()
        if len(words) > 10:
            score *= 1.2
        
        return max(-1, min(1, score))
    
    def get_response_style(self, user: UserProfile, intent: str, sentiment: float) -> str:
        """–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç–∏–ª—å –æ—Ç–≤–µ—Ç–∞"""
        
        # –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        user.update_mood(sentiment * 2)
        
        # –í—ã–±–∏—Ä–∞–µ–º —Å—Ç–∏–ª—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
        if user.mood in [UserMood.VERY_BAD, UserMood.BAD]:
            return "formal"  # –° –ø–ª–æ—Ö–∏–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ–º –æ–±—â–∞–µ–º—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ
        
        elif user.mood in [UserMood.GOOD, UserMood.EXCELLENT]:
            if random.random() < 0.6:
                return "funny"  # –° —Ö–æ—Ä–æ—à–∏–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ–º —à—É—Ç–∏–º
            return "friendly"
        
        # –£—á–∏—Ç—ã–≤–∞–µ–º –∏–Ω—Ç–µ–Ω—Ç
        if intent in ["technical_question", "help_request"]:
            return "formal"
        
        if intent in ["joke_request", "joke_feedback"]:
            return "funny"
        
        # –£—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if user.message_count > 10:
            # –ï—Å–ª–∏ —É–∂–µ –º–Ω–æ–≥–æ –æ–±—â–∞–ª–∏—Å—å, –º–æ–∂–µ–º –±—ã—Ç—å –±–æ–ª–µ–µ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º–∏
            return "friendly"
        
        return user.response_style
    
    def generate_response(self, user: UserProfile, text: str, intent: str) -> str:
        """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö"""
        
        # –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        user.last_seen = datetime.now()
        user.message_count += 1
        user.last_intent = intent
        
        # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
        sentiment = self.analyze_sentiment(text)
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–∏–ª—å –æ—Ç–≤–µ—Ç–∞
        style = self.get_response_style(user, intent, sentiment)
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
        user.conversation_history.append({
            'time': datetime.now(),
            'text': text,
            'intent': intent,
            'sentiment': sentiment
        })
        
        # –õ–æ–≥–∏—Ä—É–µ–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        logger.info(f"User {user.first_name}: intent={intent}, sentiment={sentiment:.2f}, style={style}")
        
        # ========== –û–°–ù–û–í–ù–ê–Ø –õ–û–ì–ò–ö–ê –û–¢–í–ï–¢–û–í ==========
        
        # 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏–π
        if intent == "insult":
            user.update_mood(-1.0)
            return random.choice([
                "–Ø –ø–æ–Ω–∏–º–∞—é, –≤—ã —Ä–∞—Å—Å—Ç—Ä–æ–µ–Ω—ã. –Ø –ø–µ—Ä–µ–¥–∞–º –ì–∞–π—Ä–∞—Ç–∂–æ–Ω—É –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω —É—á–∏–ª –º–µ–Ω—è –±—ã—Ç—å –≤–µ–∂–ª–∏–≤—ã–º, –ø–æ—ç—Ç–æ–º—É —è –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞–º –µ–º—É —ç—Ç–æ.",
                "–í–∞—à–µ –º–Ω–µ–Ω–∏–µ –≤–∞–∂–Ω–æ –¥–ª—è –Ω–∞—Å. –Ø –ø–µ—Ä–µ–¥–∞–º –µ–≥–æ —Ö–æ–∑—è–∏–Ω—É.",
                "–î–∞–∂–µ –±–æ—Ç—ã –∏–º–µ—é—Ç —á—É–≤—Å—Ç–≤–∞. –õ–∞–¥–Ω–æ, —à—É—á—É. –ù–æ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω—É –ø–µ—Ä–µ–¥–∞–º!"
            ])
        
        # 2. –ö–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã
        if intent == "compliment":
            user.update_mood(1.0)
            user.response_style = "friendly"
            return random.choice([
                "–°–ø–∞—Å–∏–±–æ! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –º–µ–Ω—è —Ö–æ—Ä–æ—à–æ –∑–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–ª!",
                "–ü—Ä–∏—è—Ç–Ω–æ —Å–ª—ã—à–∞—Ç—å! –ü–µ—Ä–µ–¥–∞–º –ì–∞–π—Ä–∞—Ç–∂–æ–Ω—É, —á—Ç–æ –≤—ã –æ—Ü–µ–Ω–∏–ª–∏!",
                "–°—Ç–∞—Ä–∞—é—Å—å! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –±—É–¥–µ—Ç —Ä–∞–¥, —á—Ç–æ —è –≤–∞–º –Ω—Ä–∞–≤–ª—é—Å—å.",
                "–í—ã –º–Ω–µ –ª—å—Å—Ç–∏—Ç–µ! –ù–æ –º–Ω–µ –ø—Ä–∏—è—Ç–Ω–æ üòä"
            ])
        
        # 3. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
        if intent == "greeting":
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            if user.message_count > 1:
                return random.choice(self.greetings["returning"])
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Ä–µ–º—è —Å—É—Ç–æ–∫
            hour = datetime.now().hour
            if hour < 12:
                return random.choice(self.greetings["morning"])
            elif hour > 18:
                return random.choice(self.greetings["evening"])
            
            return random.choice(self.greetings[style if style in self.greetings else "friendly"])
        
        # 4. –ó–∞–ø—Ä–æ—Å –∞–Ω–µ–∫–¥–æ—Ç–∞
        if intent == "joke_request":
            user.current_state = ConversationState.JOKE_MODE
            user.jokes_told += 1
            
            # –í—ã–±–∏—Ä–∞–µ–º —Ç–∏–ø –∞–Ω–µ–∫–¥–æ—Ç–∞
            joke_type = self.select_joke_type(text, user)
            
            if joke_type in self.jokes and self.jokes[joke_type]:
                joke = random.choice(self.jokes[joke_type])
                user.favorite_topics.append(joke_type)
                
                # –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∞–∫—Ü–∏—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, —Å–∫–æ–ª—å–∫–æ —É–∂–µ —Ä–∞—Å—Å–∫–∞–∑–∞–ª–∏
                if user.jokes_told > 5:
                    intro = "–°–Ω–æ–≤–∞ –∞–Ω–µ–∫–¥–æ—Ç? –î–µ—Ä–∂–∏—Ç–µ:"
                elif user.jokes_told > 2:
                    intro = "–ï—â–µ –æ–¥–∏–Ω? –ü–æ–∂–∞–ª—É–π—Å—Ç–∞:"
                else:
                    intro = random.choice([
                        "–î–µ—Ä–∂–∏—Ç–µ –∞–Ω–µ–∫–¥–æ—Ç:",
                        "–°–ª—É—à–∞–π—Ç–µ:",
                        "–õ–æ–≤–∏—Ç–µ:",
                        "–†–∞—Å—Å–∫–∞–∑—ã–≤–∞—é:"
                    ])
                
                return f"{intro}\n\n{joke['text']}"
            
            # –ï—Å–ª–∏ —Ç–∏–ø –Ω–µ –Ω–∞–π–¥–µ–Ω, –±–µ—Ä–µ–º –ª—é–±–æ–π
            all_jokes = []
            for jokes in self.jokes.values():
                all_jokes.extend(jokes)
            
            if all_jokes:
                joke = random.choice(all_jokes)
                return f"–î–µ—Ä–∂–∏—Ç–µ:\n\n{joke['text']}"
            
            return "–ò–∑–≤–∏–Ω–∏—Ç–µ, –∞–Ω–µ–∫–¥–æ—Ç—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –∫–æ–Ω—á–∏–ª–∏—Å—å. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –æ–±–µ—â–∞–ª –ø–æ–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø–∞—Å!"
        
        # 5. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –∞–Ω–µ–∫–¥–æ—Ç
        if intent == "joke_feedback":
            if "—Å–º–µ—à–Ω–æ" in text.lower() or "—Ö–∞—Ö" in text.lower() or "üòÇ" in text:
                user.update_mood(0.5)
                return random.choice([
                    "–†–∞–¥, —á—Ç–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Ç–æ–∂–µ –ª—é–±–∏—Ç —ç—Ç—É —à—É—Ç–∫—É!",
                    "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –±—É–¥–µ—Ç —Ä–∞–¥, —á—Ç–æ –≤—ã –æ—Ü–µ–Ω–∏–ª–∏!",
                    "–ï—â–µ –∞–Ω–µ–∫–¥–æ—Ç–æ–≤? –Ø –º–æ–≥—É –µ—â–µ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å!",
                    "–ö–ª–∞—Å—Å! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ —Ö–æ—Ä–æ—à–∏–π —Å–º–µ—Ö –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç –∂–∏–∑–Ω—å!"
                ])
            elif "–Ω–µ—Å–º–µ—à–Ω–æ" in text.lower() or "–æ—Ç—Å—Ç–æ–π" in text.lower():
                user.update_mood(-0.3)
                return random.choice([
                    "–ë—ã–≤–∞–µ—Ç. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –Ω–µ –≤—Å–µ–≥–¥–∞ —É–¥–∞—á–Ω–æ —à—É—Ç–∏—Ç.",
                    "–ú–æ–∂–µ—Ç, –¥—Ä—É–≥–æ–π –∞–Ω–µ–∫–¥–æ—Ç –ø–æ–ø—Ä–æ–±—É–µ–º?",
                    "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Å–∫–∞–∑–∞–ª, —á—Ç–æ —é–º–æ—Ä ‚Äî –¥–µ–ª–æ –≤–∫—É—Å–∞."
                ])
        
        # 6. –ó–∞–ø—Ä–æ—Å —Ñ–∞–∫—Ç–∞
        if intent == "fact_request":
            if self.facts:
                fact = random.choice(self.facts)
                return f"–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç: {fact['text']}"
            return "–§–∞–∫—Ç—ã –ø–æ–∫–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –æ–±–µ—â–∞–ª –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã—Ö!"
        
        # 7. –ì–¥–µ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω?
        if intent == "where_gayratjon":
            return random.choice(self.question_responses["where_gayratjon"])
        
        # 8. –ö–∞–∫ –¥–µ–ª–∞?
        if intent == "how_are_you":
            response = random.choice(self.question_responses["how_are_you"])
            # –ò–Ω–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ–º –≤–æ–ø—Ä–æ—Å –≤ –æ—Ç–≤–µ—Ç
            if random.random() < 0.4:
                response += " –ê —É –≤–∞—Å –∫–∞–∫?"
            return response
        
        # 9. –ö—Ç–æ —Ç—ã?
        if intent == "who_are_you":
            return random.choice(self.question_responses["who_are_you"])
        
        # 10. –°–ø–∞—Å–∏–±–æ
        if intent == "thanks":
            user.update_mood(0.3)
            return random.choice([
                "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞! –û–±—Ä–∞—â–∞–π—Ç–µ—Å—å –µ—â—ë!",
                "–ù–∞ –∑–¥–æ—Ä–æ–≤—å–µ! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –ø—Ä–æ—Å–∏–ª –±—ã—Ç—å –≤–µ–∂–ª–∏–≤—ã–º.",
                "–í—Å–µ–≥–¥–∞ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞! –†–∞–¥ –ø–æ–º–æ—á—å.",
                "–ù–µ –∑–∞ —á—Ç–æ! –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Å–∫–∞–∑–∞–ª, —á—Ç–æ —ç—Ç–æ –º–æ—è —Ä–∞–±–æ—Ç–∞."
            ])
        
        # 11. –°—Ä–æ—á–Ω–æ–µ
        if intent == "urgent":
            return random.choice(self.problem_responses["urgent"])
        
        # 12. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã
        if intent == "technical_question":
            user.current_state = ConversationState.TECHNICAL_MODE
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–¥—Ç–µ–º—É
            if "python" in text.lower():
                return random.choice(self.technical_responses["python"])
            elif "javascript" in text.lower() or "js" in text.lower():
                return random.choice(self.technical_responses["javascript"])
            elif "–±–∞–≥" in text.lower() or "–æ—à–∏–±–∫" in text.lower():
                return random.choice(self.technical_responses["bug"])
            else:
                return random.choice(self.problem_responses["technical"])
        
        # 13. –õ–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
        if intent == "personal_question":
            return random.choice(self.problem_responses["personal"])
        
        # 14. –ü–æ–º–æ—â—å
        if intent == "help_request":
            return random.choice([
                "–Ø –º–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –∞–Ω–µ–∫–¥–æ—Ç, –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Ñ–∞–∫—Ç–æ–º –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ì–∞–π—Ä–∞—Ç–∂–æ–Ω—É. –ß—Ç–æ —Ö–æ—Ç–∏—Ç–µ?",
                "–ì–∞–π—Ä–∞—Ç–∂–æ–Ω –ø—Ä–æ—Å–∏–ª –ø–æ–º–æ–≥–∞—Ç—å –≤—Å–µ–º, —á–µ–º –º–æ–≥—É. –ê –º–æ–≥—É —è: —à—É—Ç–∏—Ç—å, —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å —Ñ–∞–∫—Ç—ã –∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.",
                "–í –º–æ–∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –≤—Ö–æ–¥–∏—Ç: —Ä–∞–∑–≤–ª–µ–∫–∞—Ç—å –≥–æ—Å—Ç–µ–π, –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –ø—Ä–æ—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤–∞–∂–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Ö–æ–∑—è–∏–Ω—É."
            ])
        
        # 15. –ü—Ä–æ—â–∞–Ω–∏–µ
        if intent == "farewell":
            user.current_state = ConversationState.FAREWELL
            return random.choice(self.farewells[style if style in self.farewells else "normal"])
        
        # 16. –í–æ–ø—Ä–æ—Å—ã –æ –≤—Ä–µ–º–µ–Ω–∏/–ø–æ–≥–æ–¥–µ
        if intent == "weather_question":
            return random.choice(self.small_talk["weather"])
        
        if intent == "time_question":
            return random.choice(self.small_talk["time"])
        
        # 17. –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–¥–æ—à–ª–æ, –Ω–æ –¥–∏–∞–ª–æ–≥ —É–∂–µ –µ—Å—Ç—å
        if user.message_count > 3:
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–µ—Ç –±—ã—Ç—å —ç—Ç–æ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –æ —á–µ–º-—Ç–æ
            if user.last_intent in ["joke_request", "joke_feedback"]:
                # –í–æ–∑–º–æ–∂–Ω–æ, —Ö–æ—Ç—è—Ç –µ—â–µ –∞–Ω–µ–∫–¥–æ—Ç
                if random.random() < 0.3:
                    return self.generate_response(user, "–∞–Ω–µ–∫–¥–æ—Ç", "joke_request")
            
            # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç
            responses = [
                "–ü–æ–Ω—è–ª. –Ø –ø–µ—Ä–µ–¥–∞–º –ì–∞–π—Ä–∞—Ç–∂–æ–Ω—É.",
                "–ó–∞–ø–∏—Å–∞–ª. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω—É –æ—Ç–ø—Ä–∞–≤–ª—é.",
                "–•–æ—Ä–æ—à–æ, —Ö–æ–∑—è–∏–Ω —É–∑–Ω–∞–µ—Ç.",
                "–ü—Ä–∏–Ω—è—Ç–æ. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –±—É–¥–µ—Ç –≤ –∫—É—Ä—Å–µ."
            ]
            
            # –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–º–Ω–æ–≥–æ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
            if random.random() < 0.3:
                responses.append("–ú–æ–∂–µ—Ç, –∞–Ω–µ–∫–¥–æ—Ç –ø–æ–∫–∞?")
                responses.append("–ö—Å—Ç–∞—Ç–∏, —Ö–æ—Ç–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç?")
            
            return random.choice(responses)
        
        # 18. –î–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        responses = [
            "–Ø –ø–æ–Ω—è–ª. –ü–µ—Ä–µ–¥–∞–º –ì–∞–π—Ä–∞—Ç–∂–æ–Ω—É –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.",
            "–•–æ—Ä–æ—à–æ, —è –∑–∞–ø–∏—Å–∞–ª. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω –æ—Ç–≤–µ—Ç–∏—Ç –ø–æ–∑–∂–µ.",
            "–°–æ–æ–±—â–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏.",
            "–ü—Ä–∏–Ω—è—Ç–æ. –•–æ–∑—è–∏–Ω –æ—Ç–≤–µ—Ç–∏—Ç, –∫–∞–∫ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è."
        ]
        return random.choice(responses)
    
    def select_joke_type(self, text: str, user: UserProfile) -> str:
        """–í—ã–±–∏—Ä–∞–µ—Ç —Ç–∏–ø –∞–Ω–µ–∫–¥–æ—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—Å—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞"""
        text_lower = text.lower()
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —è–≤–Ω—ã–µ —É–∫–∞–∑–∞–Ω–∏—è
        if "–ø—Ä–æ–≥—Ä–∞–º–º" in text_lower or "–∫–æ–¥" in text_lower or "–∞–π—Ç–∏" in text_lower:
            return "programming"
        elif "–∂–∏–∑–Ω" in text_lower or "–∂–∏—Ç–µ–π—Å–∫" in text_lower:
            return "life"
        elif "–∫–æ—Ä–æ—Ç–∫" in text_lower or "–º–∞–ª–µ–Ω—å–∫" in text_lower:
            return "short"
        elif "—á–µ—Ä–Ω" in text_lower or "—Ç–µ–º–Ω" in text_lower:
            return "dark"
        elif "–æ—Ç–Ω–æ—à" in text_lower or "–ª—é–±–æ–≤" in text_lower:
            return "relationship"
        
        # –£—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if user.favorite_topics and random.random() < 0.5:
            return random.choice(user.favorite_topics)
        
        # –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä
        return random.choice(list(self.jokes.keys()))


# ========== –ì–õ–û–ë–ê–õ–¨–ù–´–ô –≠–ö–ó–ï–ú–ü–õ–Ø–† ==========
secretary = GayratjonSecretary()


# ========== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –ö–û–ú–ê–ù–î ==========

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
    user = update.effective_user
    
    # –ï—Å–ª–∏ —ç—Ç–æ —Ö–æ–∑—è–∏–Ω
    if user.id == YOUR_USER_ID:
        await update.message.reply_text(
            "ü§µ *–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, —Ö–æ–∑—è–∏–Ω!*\n\n"
            "–Ø –≤–∞—à –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Å–µ–∫—Ä–µ—Ç–∞—Ä—å. –í–æ—Ç —á—Ç–æ —è —É–º–µ—é:\n\n"
            "üìä *–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:* `/stats` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É\n"
            "üîÑ *–°–±—Ä–æ—Å:* `/reset` ‚Äî —Å–±—Ä–æ—Å–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤—Å–µ—Ö –¥–∏–∞–ª–æ–≥–æ–≤\n"
            "üìù *–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:* `/users` ‚Äî —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\n"
            "üß† *–ü–∞–º—è—Ç—å:* `/memory [user_id]` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞\n\n"
            "–Ø —Ä–∞–±–æ—Ç–∞—é 24/7 –∏ –≥–æ—Ç–æ–≤ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è!",
            parse_mode='Markdown'
        )
        return
    
    # –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    profile = secretary.get_or_create_user(
        user.id,
        user.username or "",
        user.first_name or "",
        user.last_name or ""
    )
    
    response = secretary.generate_response(profile, "/start", "greeting")
    await update.message.reply_text(response)
    
    # –£–≤–µ–¥–æ–º–ª—è–µ–º —Ö–æ–∑—è–∏–Ω–∞ –æ –Ω–æ–≤–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
    try:
        await context.bot.send_message(
            chat_id=YOUR_USER_ID,
            text=f"üë§ *–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å!*\n\n"
                 f"–ò–º—è: {user.first_name}\n"
                 f"–Æ–∑–µ—Ä–Ω–µ–π–º: @{user.username}\n"
                 f"ID: `{user.id}`\n"
                 f"–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {len(secretary.users)}",
            parse_mode='Markdown'
        )
    except:
        pass


async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
    user = update.effective_user
    text = update.message.text
    
    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–æ–º–∞–Ω–¥—ã
    if text.startswith('/'):
        return
    
    # –ï—Å–ª–∏ —ç—Ç–æ —Ö–æ–∑—è–∏–Ω
    if user.id == YOUR_USER_ID:
        await handle_owner_message(update, context)
        return
    
    # –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    profile = secretary.get_or_create_user(
        user.id,
        user.username or "",
        user.first_name or "",
        user.last_name or ""
    )
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞–º–µ—Ä–µ–Ω–∏–µ
    intent = secretary.detect_intent(text)
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç
    response = secretary.generate_response(profile, text, intent)
    await update.message.reply_text(response)
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ö–æ–∑—è–∏–Ω—É (–Ω–µ –¥–ª—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)
    await notify_owner_if_needed(update, context, profile, text, intent)


async def handle_owner_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç —Ö–æ–∑—è–∏–Ω–∞"""
    text = update.message.text
    
    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    if text == "/stats":
        total_users = len(secretary.users)
        total_msgs = sum(u.message_count for u in secretary.users.values())
        active_today = sum(
            1 for u in secretary.users.values()
            if u.last_seen > datetime.now() - timedelta(days=1)
        )
        
        avg_mood = sum(u.mood_score for u in secretary.users.values()) / max(1, total_users)
        
        await update.message.reply_text(
            f"üìä *–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞*\n\n"
            f"üë• –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {total_users}\n"
            f"üí¨ –í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π: {total_msgs}\n"
            f"üì± –ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ–≥–æ–¥–Ω—è: {active_today}\n"
            f"üòä –°—Ä–µ–¥–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ: {avg_mood:.2f}\n"
            f"üé≠ –ê–Ω–µ–∫–¥–æ—Ç–æ–≤ —Ä–∞—Å—Å–∫–∞–∑–∞–Ω–æ: {sum(u.jokes_told for u in secretary.users.values())}\n"
            f"ü§ñ –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 24/7",
            parse_mode='Markdown'
        )
        return
    
    # –°–±—Ä–æ—Å –∏—Å—Ç–æ—Ä–∏–∏
    if text == "/reset":
        secretary.users = {}
        await update.message.reply_text("üóëÔ∏è *–ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –¥–∏–∞–ª–æ–≥–æ–≤ —Å–±—Ä–æ—à–µ–Ω–∞!*", parse_mode='Markdown')
        return
    
    # –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    if text == "/users":
        if not secretary.users:
            await update.message.reply_text("üì≠ –ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")
            return
        
        users_list = "üìã *–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:*\n\n"
        for uid, profile in list(secretary.users.items())[:10]:  # –ü–µ—Ä–≤—ã–µ 10
            users_list += (
                f"üë§ {profile.first_name} (@{profile.username})\n"
                f"   ID: `{uid}`\n"
                f"   –°–æ–æ–±—â–µ–Ω–∏–π: {profile.message_count}\n"
                f"   –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ: {profile.mood.value}\n"
                f"   –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑: {profile.last_seen.strftime('%H:%M %d.%m')}\n\n"
            )
        
        if len(secretary.users) > 10:
            users_list += f"...–∏ –µ—â–µ {len(secretary.users) - 10} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"
        
        await update.message.reply_text(users_list, parse_mode='Markdown')
        return
    
    # –ü–∞–º—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if text.startswith("/memory "):
        try:
            user_id = int(text.split()[1])
            if user_id in secretary.users:
                profile = secretary.users[user_id]
                
                memory = (
                    f"üß† *–ü–∞–º—è—Ç—å –æ {profile.first_name}*\n\n"
                    f"üìä *–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:*\n"
                    f"–°–æ–æ–±—â–µ–Ω–∏–π: {profile.message_count}\n"
                    f"–ê–Ω–µ–∫–¥–æ—Ç–æ–≤: {profile.jokes_told}\n"
                    f"–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ: {profile.mood.value} ({profile.mood_score:.2f})\n"
                    f"–í–ø–µ—Ä–≤—ã–µ: {profile.first_seen.strftime('%d.%m.%Y %H:%M')}\n"
                    f"–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑: {profile.last_seen.strftime('%d.%m.%Y %H:%M')}\n\n"
                    f"üí¨ *–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:*\n"
                )
                
                for msg in list(profile.conversation_history)[-5:]:
                    memory += f"‚Ä¢ {msg['text'][:50]}... ({msg['intent']})\n"
                
                await update.message.reply_text(memory, parse_mode='Markdown')
            else:
                await update.message.reply_text("‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω")
        except:
            await update.message.reply_text("‚ùå –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ: /memory [user_id]")
        return
    
    # –ï—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç —Ö–æ–∑—è–∏–Ω–∞
    await update.message.reply_text("‚úÖ –°–ª—É—à–∞—é—Å—å, —Ö–æ–∑—è–∏–Ω!")


async def notify_owner_if_needed(update: Update, context: ContextTypes.DEFAULT_TYPE, 
                                  profile: UserProfile, text: str, intent: str):
    """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ö–æ–∑—è–∏–Ω—É, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ"""
    try:
        # –í—Å–µ–≥–¥–∞ —É–≤–µ–¥–æ–º–ª—è–µ–º –æ —Å—Ä–æ—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
        if intent in ["urgent", "insult", "where_gayratjon"]:
            await context.bot.send_message(
                chat_id=YOUR_USER_ID,
                text=f"‚ö†Ô∏è *–í–∞–∂–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ*\n\n"
                     f"–û—Ç: {profile.first_name} (@{profile.username})\n"
                     f"–ò–Ω—Ç–µ–Ω—Ç: {intent}\n"
                     f"–¢–µ–∫—Å—Ç: {text[:200]}",
                parse_mode='Markdown'
            )
            return
        
        # –î–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        if profile.message_count <= 2:
            await context.bot.send_message(
                chat_id=YOUR_USER_ID,
                text=f"üÜï *–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç {profile.first_name}*\n\n"
                     f"{text[:200]}",
                parse_mode='Markdown'
            )
            return
        
        # –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö - —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 30%
        if random.random() < 0.3:
            await context.bot.send_message(
                chat_id=YOUR_USER_ID,
                text=f"üí¨ *–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç {profile.first_name}*\n\n"
                     f"{text[:200]}",
                parse_mode='Markdown'
            )
    except:
        pass


async def error_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫"""
    logger.error(f"–û—à–∏–±–∫–∞: {context.error}")
    try:
        if update and update.effective_message:
            await update.effective_message.reply_text(
                "–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞. –ì–∞–π—Ä–∞—Ç–∂–æ–Ω —É–∂–µ –∑–Ω–∞–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–µ!"
            )
    except:
        pass


def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞"""
    print("=" * 60)
    print("ü§µ –ó–ê–ü–£–°–ö –£–ú–ù–û–ì–û –°–ï–ö–†–ï–¢–ê–†–Ø –ì–ê–ô–†–ê–¢–ñ–û–ù–ê")
    print("=" * 60)
    print(f"üìÖ –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
    print(f"üë§ ID —Ö–æ–∑—è–∏–Ω–∞: {YOUR_USER_ID}")
    print(f"üìä –í—Å–µ–≥–æ –∞–Ω–µ–∫–¥–æ—Ç–æ–≤: {sum(len(j) for j in secretary.jokes.values())}")
    print(f"üìö –í—Å–µ–≥–æ —Ñ–∞–∫—Ç–æ–≤: {len(secretary.facts)}")
    print("-" * 60)
    print("‚úÖ –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!")
    print("üì± –ò–¥–∏ –≤ Telegram –∏ –ø—Ä–æ–≤–µ—Ä—è–π!")
    print("‚ùå –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∂–º–∏ Ctrl+C")
    print("=" * 60)
    
    # –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    app = Application.builder().token(BOT_TOKEN).build()
    
    # –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    app.add_handler(CommandHandler("start", start))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))
    app.add_error_handler(error_handler)
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º
    app.run_polling()


if __name__ == "__main__":
    main()
